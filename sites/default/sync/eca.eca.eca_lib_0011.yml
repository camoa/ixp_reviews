uuid: ea068047-1e3b-48dc-9fd8-8cf3ea5d5956
langcode: en
status: true
dependencies:
  module:
    - eca_base
    - eca_tamper
_core:
  default_config_hash: uNOtLu901RoheEv_-BF3SmXsyiF5QGXxEdy_YuZLb1k
id: eca_lib_0011
modeller: bpmn_io
label: 'Get next incremental ID'
version: v2
weight: 0
events:
  Event_1o2bq99:
    plugin: 'eca_base:eca_custom'
    label: 'Custom event "increment"'
    configuration:
      event_id: increment
    successors:
      -
        id: Activity_1y4d0g8
        condition: ''
conditions: {  }
gateways: {  }
actions:
  Activity_0qg1wci:
    plugin: eca_state_read
    label: 'Read value from state'
    configuration:
      key: eca_id
      token_name: id
    successors:
      -
        id: Activity_1b6racd
        condition: ''
  Activity_1b6racd:
    plugin: 'eca_tamper:math'
    label: 'Increment by 1'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '0[id]'
      eca_token_name: id
    successors:
      -
        id: Activity_1p2buof
        condition: ''
  Activity_1p2buof:
    plugin: eca_state_write
    label: 'Write value back to state'
    configuration:
      key: eca_id
      value: '[id]'
      use_yaml: false
    successors:
      -
        id: Activity_0l5xmcm
        condition: ''
  Activity_0l5xmcm:
    plugin: action_message_action
    label: 'Print message'
    configuration:
      message: 'Current value is [id]'
      replace_tokens: true
    successors: {  }
  Activity_1y4d0g8:
    plugin: eca_lock_acquire
    label: 'Acquire lock'
    configuration:
      lock_name: eca-id
      lock_timeout: '20'
      lock_wait: true
      token_name: ''
    successors:
      -
        id: Activity_0qg1wci
        condition: ''
